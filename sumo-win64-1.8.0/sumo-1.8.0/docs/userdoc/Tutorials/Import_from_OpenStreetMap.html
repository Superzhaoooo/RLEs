<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/Tutorials/Import_from_OpenStreetMap.html">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <title>Tutorials/Import from OpenStreetMap - SUMO Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">
                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../index.html" class="nav-link">Documentation</a>
                            </li>
                            <li class="navitem">
                                <a href="../Tutorials.html" class="nav-link">Tutorials</a>
                            </li>
                            <li class="navitem">
                                <a href="../FAQ.html" class="nav-link">FAQ</a>
                            </li>
                            <li class="navitem">
                                <a href="../Downloads.html" class="nav-link">Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="../Publications.html" class="nav-link">Publications</a>
                            </li>
                            <li class="navitem">
                                <a href="../Developer/Main.html" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="../ChangeLog.html" class="nav-link">ChangeLog</a>
                            </li>
                            <li class="navitem">
                                <a href="https://github.com/eclipse/sumo/commits/master/docs/web" class="nav-link">Recent Changes</a>
                            </li>
                            <li class="navitem">
                                <a href="https://eclipse.org/sumo/contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> <u>S</u>earch
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/eclipse/sumo/edit/master/docs/web/docs/Tutorials/Import_from_OpenStreetMap.md" class="nav-link"><i class="fa fa-github"></i> <u>E</u>dit on GitHub</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            More <i class="fa fa-chevron-circle-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://github.com/eclipse/sumo/issues">Report a Bug / Issue / Typo</a>
                            <a class="dropdown-item" href="../Editing_Articles.html">Help on editing articles</a>
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">Keyboard Shortcuts</a>
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                            <span class="dropdown-item" id="dark-mode-div">Dark mode <label id="theme-switch" class="theme-switch" for="checkbox_theme">
                              <input type="checkbox" id="checkbox_theme">
                          </label></span>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#prepare_the_map_of_openstreetmap">Prepare the Map of OpenStreetMap</a></li>
            <li class="nav-item main"><a href="#configure_implicit_attributes_of_the_map">Configure Implicit Attributes of the Map</a></li>
            <li class="nav-item main"><a href="#convert_the_map_in_a_sumo_network">Convert the Map in a SUMO Network</a></li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>visit <a href="https://eclipse.org/sumo">eclipse.org/sumo</a></p>
        </div>

</div>
                  
                </div>
                <div class="col-md-9 main-area" role="main">
                  
                  <hTitles>Tutorials/Import from OpenStreetMap<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<p><img alt="OpenStreetMapOverview.svg" src="../images/OpenStreetMapOverview.svg" title="OpenStreetMapOverview.svg" /></p>
<p>Overview of the steps: Make up the map, compile an edge type file, and generate the SUMO network file.</p>
<p>OpenStreetMap is a valuable source for
real-world map data. This tutorial shows you</p>
<ol>
<li>how to prepare a map of OpenStreetMap to be useful for traffic
    simulation and</li>
<li>how to import this map to SUMO.</li>
</ol>
<p>You may also find the following pages useful:</p>
<ul>
<li><a href="OSMWebWizard.html">Tutorials/OSMWebWizard</a></li>
<li><a href="../Networks/Import/OpenStreetMap.html">Networks/Import/OpenStreetMap</a></li>
<li><a href="PT_from_OpenStreetMap.html">Tutorials/PT_from_OpenStreetMap</a></li>
<li><a href="../OpenStreetMap_file.html">OpenStreetMap file</a></li>
<li><a href="../Networks/Import/OpenStreetMapDownload.html">Networks/Import/OpenStreetMapDownload</a>.</li>
</ul>
<h2 id="prepare_the_map_of_openstreetmap">Prepare the Map of OpenStreetMap<a class="headerlink" href="#prepare_the_map_of_openstreetmap" title="Permanent link">#</a></h2>
<p><img alt="eichstaett.osm.png" src="../images/Eichstaett.osm.png" title="eichstaett.osm.png" /></p>
<p>The OpenStreetMap file created in this step. It shows the German city Eichstätt opened in JOSM.</p>
<p>The first step in this tutorial is to obtain a map the vehicles can drive in. If
you do not want to perform this step, you can take
<a href="OSMActivityGen/eichstaett.osm.html">Tutorials/OSMActivityGen/eichstaett.osm</a>.
It has been prepared with this tutorial.</p>
<p>To get a detail out of OpenStreetMap, you can either use the export
function of the web site or the program JOSM. Both can save a selection
of objects (usually given as a rectangular range) into a file: the
<a href="../OpenStreetMap_file.html">OpenStreetMap file</a>. You can simply use
this file as the map for your traffic simulation with SUMO.</p>
<p>The data in OpenStreetMap is often not completely ready for traffic
simulation though. For a good simulation, the map must usually be
enhanced. I recommend you to do the following steps:</p>
<ol>
<li>Complete the map directly in OpenStreetMap. Follow the guidelines on
    the <a href="http://wiki.openstreetmap.org">OpenStreetMap wiki</a> in the area
    <em>Map Making</em>. They give valuable hints what software to use and how
    to encode all attributes of the map. You should ensure that the map
    contains all data related to traffic simulation. (At this stage,
    fill in only correct data that can be well understood by others. Do
    not tweak the map just for your simulation. This comes below.)
    For the given example of the city Eichstätt, I found that most
    streets were already in the map – they were sufficient for my
    simulation. So I did only look at the tags (description of
    properties) of the streets in OpenStreetMap and did not add new
    streets. I took a notebook with the OpenStreetMap editor JOSM, drove
    through the city and corrected the following attributes:<ul>
<li>The type (importance) of a street is defined with the tag
  <em>highway</em>. This attribute helps SUMO to determine the implicit
  speed limit and right of way rule.</li>
<li>All streets with speed limits that differ from the implicit
  regulatory limits (i.e. speed limits set by traffic signs)
  should have a tag <em>maxspeed</em>. The correct speed limits help SUMO
  to find reasonable routes through the road network.</li>
<li>One-way streets often have a significant impact on the traffic
  flow. They can be marked in OpenStreetMap with the key-value
  pair <em>oneway=yes</em>.</li>
<li>The correct number of lanes helps to avoid unrealistic traffic
  congestions in the simulation. The tag <em>lanes</em> specifies the
  total number of lanes of a street, for both directions together.
  So you cannot describe various complex lane configurations in
  OpenStreetMap (like two lanes in one direction, another lane for
  turning right and one lane for the opposite direction). They can
  only be defined in the <a href="../Networks/SUMO_Road_Networks.html">SUMO network
  file</a> directly or its
  corresponding <a href="../Networks/PlainXML.html">SUMO XML description
  files</a>.
  Such lane configurations go beyond this tutorial.</li>
<li>In OpenStreetMap, traffic lights are nodes marked with the
  key-value pair <em>highway=traffic_signals</em>. Each traffic light is
  independent; you cannot associate several interdependent traffic
  lights at a big junction with each other. Again the <a href="../Networks/SUMO_Road_Networks.html">SUMO
  network file</a> can
  contain such a complex logic and netconvert tries to detect such
  interdependent traffic lights when you use the option
  --try-join-tls (see section <a href="#convert_the_map_in_a_sumo_network">#Convert the Map in the SUMO Net
  Format</a>
  below).</li>
<li>Finally go through the warnings of JOSM. Most of them do not
  affect your work, but some of them help you to find significant
  errors in the map (like unconnected streets).
  During this step, do regularly upload your modifications to
  OpenStreetMap to avoid conflicts with the modifications of other
  editors.</li>
</ul>
</li>
<li>Now the map in OpenStreetMap should have the necessary quality for
    your simulation. Next you should determine the desired detail of the
    map and export it in an <a href="../OpenStreetMap_file.html">OpenStreetMap
    file</a>. Be careful to never upload the
    map back to OpenStreetMap from now on.</li>
<li>Finally you can enhance the map for your specific purpose: Open the
    OpenStreetMap file in JOSM. Find the right nodes at which streets
    should end and remove unnecessary objects (which are out of the
    desired detail). The section <a href="../Networks/Import/OpenStreetMap.html#editing_osm_networks">Networks/Import/OpenStreetMap#Editing
    OSM
    networks</a>
    describes further ways to clean up the OSM file. But actually, most
    clean up is done by netconvert anyway (see section <a href="#convert_the_map_in_a_sumo_network">#Convert the
    Map in the SUMO Net
    Format</a> below).
    You are able to tweak the map for your purpose, for example, by
    adding or removing roads, changing their type, …</li>
</ol>
<p>Now you have a good map for your simulation in an <a href="../OpenStreetMap_file.html">OpenStreetMap
file</a>. The image on the top shows the map
of the city Eichstätt, which I have prepared for traffic simulation. You
can <a href="OSMActivityGen/eichstaett.osm.html">download the map
(eichstaett.osm)</a> to
follow this tutorial.</p>
<p>While the OpenStreetMap format is a widely spread format to describe a
map, SUMO has its own format for this: the <a href="../Networks/SUMO_Road_Networks.html">SUMO network
format</a>. As a consequence, you
must first convert the OpenStreetMap file in a SUMO network file. The
next two steps guide you through the conversion process.</p>
<h2 id="configure_implicit_attributes_of_the_map">Configure Implicit Attributes of the Map<a class="headerlink" href="#configure_implicit_attributes_of_the_map" title="Permanent link">#</a></h2>
<p>In a <a href="../OpenStreetMap_file.html">OpenStreetMap file</a>, the highway
attribute implicitly determines values of some other attributes, like
the speed limit. You must tell SUMO these implicit values in the <a href="../SUMO_edge_type_file.html">SUMO
edge type file</a>. It assigns default
values to the road attributes speed limit, number of lanes, priority,
one-way street and allowed vehicle classes depending on the highway
type. The article <a href="../SUMO_edge_type_file.html">SUMO edge type file</a>
provides several pre-defined SUMO edge type files and explains how you
can compile your own edge type file.</p>
<p>So determine in this step of the tutorial the implicit values of every
highway type as defined by the OpenStreetMap community. <a href="../Networks/Import/OpenStreetMap.html#recommended_typemaps">Several
edge-type files suitable for OpenStreetMap are included with SUMO. Some
of them are meant to be
combined.</a></p>
<p>For this tutorial, the type files <a href="https://github.com/eclipse/sumo/blob/master/data/typemap/osmNetconvert.typ.xml"><strong><em>&lt;SUMO_HOME&gt;</em></strong>/data/typemap/osmNetconvert.typ.xml</a> and <a href="https://github.com/eclipse/sumo/blob/master/data/typemap/osmNetconvertUrbanDe.typ.xml"><strong><em>&lt;SUMO_HOME&gt;</em></strong>/data/typemap/osmNetconvertUrbanDe.typ.xml</a> were used. Please make a copy to
your local directory if you want to modify them.</p>
<h2 id="convert_the_map_in_a_sumo_network">Convert the Map in a SUMO Network<a class="headerlink" href="#convert_the_map_in_a_sumo_network" title="Permanent link">#</a></h2>
<p>You can now create a <a href="../Networks/SUMO_Road_Networks.html">SUMO network
file</a>. The minimum options are
the OSM file and the name of the output file. <a href="../Networks/Import/OpenStreetMap.html#recommended_netconvert_options">Further options are
recommended when importing OSM data into
SUMO</a>:</p>
<pre><code>    netconvert --xml-type-files osmNetconvert.typ.xml,osmNetconvertUrbanDe.typ.xml \
     --osm-files eichstaett.osm --output-file eichstaett.net.xml \
     --geometry.remove --roundabouts.guess --ramps.guess \
     --junctions.join --tls.guess-signals --tls.discard-simple --tls.join
</code></pre>

<p>netconvert extracts the simulation-related information from the
OpenStreetMap file (see the image of
<a href="OSMActivityGen/eichstaett.osm.html">Tutorials/OSMActivityGen/eichstaett.osm</a>
above) and puts it out in the SUMO network file (see the image of
<a href="OSMActivityGen/eichstaett.net.xml.html">Tutorials/OSMActivityGen/eichstaett.net.xml</a>
below). During this process, it adds some assumptions about the traffic
lights and the connections between lanes at junctions. You can read
further information on this process in
<a href="../netconvert.html">netconvert</a>,
<a href="../Networks/Import/OpenStreetMap.html">Networks/Import/OpenStreetMap</a>
and <a href="../Networks/SUMO_Road_Networks.html">SUMO Road Networks</a>.</p>
<p><img alt="eichstaett.net.png" src="../images/Eichstaett.net.png" title="eichstaett.net.png" /> </p>
<p>The map stored in the file eichstaett.net.xml. In this map, SUMO runs its simulation. Compare it with its source, the OpenStreetMap file shown in the image above.</p>
<p>Further options of netconvert can be very useful for the OpenStreetMap import:</p>
<ul>
<li>
<p><strong>--remove-edges.by-vclass / --keep-edges.by-vclass</strong></p>
<p>In the SUMO edge
type file, you could discard roads of a certain type. In addition,
SUMO can discard roads that are restricted to certain vehicle
classes. These classes are given with this option. In <a href="../SUMO_edge_type_file.html">SUMO edge
type file</a> you can find a list of
SUMO vehicle classes. Reducing unnecessary roads makes (i.e.
footpaths) makes it easier to work the with network. To obtain a
network for simulation of passenger traffic only, the option <strong>--keep-edges.by-vclass passenger</strong> can be
used.</p>
</li>
</ul>
<ul>
<li>
<p><strong>--keep-edges.components</strong></p>
<p>Keeps only the <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;INT&gt;</em></a> largest connected
components of the network (Usually only <em>1</em> is desired). Warning:
This could remove railroads or other edges you would like to keep.
So check the messages of netconvert.</p>
</li>
</ul>
<ul>
<li>
<p><strong>--verbose</strong></p>
<p>Prints additional output.</p>
</li>
</ul>
<p>Now read the messages netconvert printed out very carefully. Try to
understand the warnings. They give you a hint how your OpenStreetMap
file could be improved to make it suitable for conversion. Get back to
your OpenStreetMap file in JOSM to fix errors or tweak the map for
conversion. I found, for example, unconnected roads with this process. I
also moved some junctions slightly, because netconvert had problems if
two junctions are very close together. But finally, I managed to convert
the OpenStreetMap file without any warnings in a SUMO network file.
(Certainly the OpenStreetMap file eichstaett.osm I provided above is
already the improved version.)</p>
<p><em>Congratulations! When you performed all the steps so far, you have a
map suitable for traffic simulation with SUMO.</em> It is in the <a href="../Networks/SUMO_Road_Networks.html">SUMO
network format</a>. The map of the
tutorial's example is in the file
<a href="OSMActivityGen/eichstaett.net.xml.html">Tutorials/OSMActivityGen/eichstaett.net.xml</a>.
Above on the right, you see an image that visualises the file. I opened
eichstaett.net.xml with the program sumo-gui and took a screenshot.</p>
<p>When you look back at the work you have done so far, most of it was
necessary to polish the OpenStreetMap data for traffic simulation and to
add missing information. A good map is hard to obtain but very important
for traffic simulation.</p>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>This page was last edited on: 08 July 2020</i></small>
          
          <hr>
            <p>Copyright &copy; 2001 - 2020 German Aerospace Center (DLR) and others.</p>
          <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa fa-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa fa-facebook-square"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa fa-instagram"></i></a>
          | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a></p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
            <div class="modal-footer" style="color: #495057 !important;">
                or search the sumo-user mailing list archive&nbsp;<a class="no-arrow-link" href="http://sumo-user.90755.n8.nabble.com/template/NamlServlet.jtp?macro=search_page&node=1&query=">here</a>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};
        
        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }
    
        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = "..",
            shortcuts = {"help": 191, "search": 83, "edit": 69};
        </script>
        <script src="../js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');
  
          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }    
          }
  
          toggleSwitch.addEventListener('change', switchTheme, false);
  
          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help dialog</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search the Documentation</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit current page on GitHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>
